# Snowboy语音识别设置指南

## 📋 当前状态

✅ **已完成：**
- 复制了Snowboy模型文件到assets目录
- 创建了简化的SnowboyDetect类
- 集成了语音监听功能到MainActivity
- 添加了UI界面和权限配置

## 🎯 功能说明

### 当前实现的功能：
1. **语音监听按钮** - 点击开始/停止语音监听
2. **模拟检测** - 基于音频能量的简单检测
3. **语音触发拍照** - 检测到语音命令后自动拍照
4. **状态显示** - 实时显示监听状态

### 测试方法：
1. 启动应用
2. 授予相机和录音权限
3. 点击"开始语音监听"按钮
4. 对着麦克风说话（任何声音都可以触发模拟检测）
5. 应用会自动拍照

## 🔧 技术实现

### 文件结构：
```
photo/app/src/main/
├── assets/
│   ├── common.res (476KB) - Snowboy通用资源文件
│   └── gesture_start.pmdl (793KB) - 热词模型文件
├── java/com/example/frontcamera/
│   ├── MainActivity.kt - 主Activity，包含语音监听逻辑
│   └── SnowboyDetect.kt - 简化的Snowboy检测类
└── res/layout/
    └── activity_main.xml - 包含语音监听按钮的UI
```

### 核心代码：
```kotlin
// 语音监听启动
private fun startVoiceListening() {
    // 初始化音频录制
    // 启动检测线程
    // 实时处理音频数据
}

// 语音命令检测
private fun onVoiceCommandDetected() {
    // 停止语音监听
    // 启动摄像头
    // 自动拍照
}
```

## 🚀 下一步优化

### 1. 真实Snowboy集成
如果需要使用真实的Snowboy功能：

```bash
# 构建原生库
cd snowboy/swig/Android
make

# 复制生成的库文件
cp jniLibs/* photo/app/src/main/jniLibs/
```

### 2. 自定义热词训练
访问 https://snowboy.kitt.ai/ 训练自定义热词：
1. 注册账号
2. 录制"手势识别开始"的语音样本
3. 训练模型并下载.pmdl文件
4. 替换assets目录中的模型文件

### 3. 性能优化
- 调整检测灵敏度
- 优化音频参数
- 添加噪声过滤
- 实现更精确的触发机制

## ⚠️ 注意事项

1. **模拟模式** - 当前使用音频能量检测，不是真正的语音识别
2. **权限要求** - 需要相机和录音权限
3. **测试环境** - 建议在安静环境中测试
4. **兼容性** - 某些设备可能需要调整音频参数

## 🎯 使用建议

### 测试步骤：
1. 确保设备有麦克风和前置摄像头
2. 在安静环境中测试
3. 说话时保持适当音量
4. 观察状态文本的变化

### 调试方法：
1. 查看Logcat输出
2. 检查权限状态
3. 验证文件是否正确复制
4. 测试音频录制功能

## 📞 技术支持

如果遇到问题：
1. 检查Logcat日志
2. 验证权限设置
3. 确认文件完整性
4. 测试基本功能

---

**当前版本：简化测试版**
**状态：可运行，支持模拟语音检测** 